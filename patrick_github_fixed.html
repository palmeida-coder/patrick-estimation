<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimation Gratuite Lyon - Patrick Almeida Efficity</title>
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#1DB584;color:#333;min-height:100vh}
.main{max-width:900px;margin:0 auto;background:white;border-radius:20px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
.header{background:linear-gradient(135deg,#1DB584,#16A075);color:white;padding:40px 20px;text-align:center}
.logo-img{background:white;padding:10px 30px;border-radius:25px;display:inline-block;margin-bottom:20px;}
.logo-img img{height:60px;vertical-align:middle;}
.photo{width:100px;height:100px;border-radius:50%;border:4px solid white;margin:20px auto;display:block;object-fit:cover}
.title{font-size:28px;font-weight:bold;margin:15px 0}
.subtitle{font-size:16px;opacity:0.9;margin-bottom:20px}
.stats{display:flex;justify-content:space-around;background:rgba(255,255,255,0.1);padding:20px;border-radius:15px;margin:20px}
.stat{text-align:center}
.stat-num{font-size:24px;font-weight:bold;display:block}
.stat-txt{font-size:12px;opacity:0.8}
.content{padding:40px}
.benefits{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:40px}
.benefit{background:#f8f9fa;padding:20px;border-radius:15px;text-align:center;border-top:4px solid #1DB584}
.benefit-icon{font-size:40px;margin-bottom:15px}
.benefit-title{font-size:16px;font-weight:bold;color:#333;margin-bottom:10px}
.benefit-text{font-size:14px;color:#666}
.form-section{background:#f8f9fa;padding:30px;border-radius:15px;margin:30px 0}
.form-title{font-size:22px;color:#1DB584;margin-bottom:20px;text-align:center}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px}
.form-group{margin-bottom:15px}
.form-label{display:block;margin-bottom:5px;font-weight:bold;color:#333}
.required{color:#dc3545}
.form-input,.form-select,.form-textarea{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px;box-sizing:border-box}
.form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:#1DB584}
.full-width{grid-column:1/span 2}
.btn{background:#1DB584;color:white;border:none;padding:15px 30px;border-radius:25px;font-size:16px;font-weight:bold;cursor:pointer;width:100%;margin-top:15px}
.btn:hover{background:#16A075}
.btn:disabled{opacity:0.6;cursor:not-allowed}
.message{padding:15px;border-radius:8px;margin:15px 0;text-align:center;font-weight:bold;display:none}
.loading{background:#e7f3ff;color:#004085;border:2px solid #b8daff}
.success{background:#d4edda;color:#155724;border:2px solid #c3e6cb}
.error{background:#f8d7da;color:#721c24;border:2px solid #f5c6cb}
.footer{background:#2c3e50;color:white;padding:30px;text-align:center}
.contact-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin:20px 0}
.contact-item{background:rgba(255,255,255,0.1);padding:15px;border-radius:10px}
.contact-icon{font-size:24px;margin-bottom:8px}
.contact-title{font-weight:bold;margin-bottom:5px}
.contact-value a{color:#1DB584;text-decoration:none}
@media (max-width:768px){
.benefits,.form-grid,.contact-grid{grid-template-columns:1fr}
.content{padding:20px}
.title{font-size:24px}
.full-width{grid-column:1}
}
</style>
</head>
<body>
<div class="main">
<div class="header">
<div class="logo-img">
  <img src="Logo gros picto.png" alt="Logo Efficity">
</div>
<img src="https://raw.githubusercontent.com/palmeida-coder/patrick-estimation/main/patrick-visage-pour-site-estimation.jpg" alt="Patrick Almeida" class="photo">
<h1 class="title">üè† Estimation Gratuite Lyon</h1>
<p class="subtitle">Estimation pr√©cise par Patrick Almeida, expert immobilier Efficity</p>
<div class="stats">
<div class="stat"><span class="stat-num">500+</span><span class="stat-txt">Ventes</span></div>
<div class="stat"><span class="stat-num">47j</span><span class="stat-txt">D√©lai</span></div>
<div class="stat"><span class="stat-num">+12%</span><span class="stat-txt">Prix</span></div>
</div>
</div>

<div class="content">
<div class="benefits">
<div class="benefit">
<div class="benefit-icon">üß†</div>
<div class="benefit-title">Analyse IA Avanc√©e</div>
<div class="benefit-text">Estimation pr√©cise avec Patrick IA 4.0</div>
</div>
<div class="benefit">
<div class="benefit-icon">‚è±Ô∏è</div>
<div class="benefit-title">Visite 48H</div>
<div class="benefit-text">Rendez-vous garanti sous 48 heures</div>
</div>
<div class="benefit">
<div class="benefit-icon">üéØ</div>
<div class="benefit-title">Vente Optimis√©e</div>
<div class="benefit-text">Accompagnement avec r√©seau qualifi√©</div>
</div>
</div>

<div class="form-section">
<h2 class="form-title">üìã Demande d'Estimation Gratuite</h2>
<form id="estimationForm">
<div class="form-grid">
<div class="form-group">
<label class="form-label">Pr√©nom <span class="required">*</span></label>
<input type="text" name="firstName" class="form-input" required placeholder="Votre pr√©nom">
</div>
<div class="form-group">
<label class="form-label">Nom <span class="required">*</span></label>
<input type="text" name="lastName" class="form-input" required placeholder="Votre nom">
</div>
</div>
<div class="form-grid">
<div class="form-group">
<label class="form-label">T√©l√©phone <span class="required">*</span></label>
<input type="tel" name="phone" class="form-input" required placeholder="06 12 34 56 78">
</div>
<div class="form-group">
<label class="form-label">Email <span class="required">*</span></label>
<input type="email" name="email" class="form-input" required placeholder="votre@email.com">
</div>
</div>
<div class="form-group full-width">
<label class="form-label">Adresse du bien <span class="required">*</span></label>
<input type="text" name="address" class="form-input" required placeholder="Votre adresse Lyon">
</div>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Type de bien <span class="required">*</span></label>
<select name="propertyType" class="form-select" required>
<option value="">S√©lectionnez</option>
<option value="Appartement">Appartement</option>
<option value="Maison">Maison</option>
<option value="Studio">Studio</option>
<option value="Loft">Loft</option>
<option value="Villa">Villa</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Surface (m¬≤) <span class="required">*</span></label>
<input type="number" name="surface" class="form-input" required min="1" placeholder="75">
</div>
</div>
<!-- Ajout de l'onglet Votre projet -->
<div class="form-group full-width">
<label class="form-label">Votre projet <span class="required">*</span></label>
<select name="projetDelai" class="form-select" required>
<option value="">S√©lectionnez</option>
<option value="1-3 mois">1 √† 3 mois</option>
<option value="3-6 mois">3 √† 6 mois</option>
<option value="plus de 6 mois">Plus de 6 mois</option>
</select>
</div>
<div class="form-group full-width">
<label class="form-label">Commentaires</label>
<textarea name="message" class="form-textarea" rows="4" placeholder="D√©crivez votre bien..."></textarea>
</div>
<button type="submit" class="btn" id="submitBtn">üè† Demander mon estimation gratuite</button>
<div id="loadingMsg" class="message loading">Envoi en cours...</div>
<div id="successMsg" class="message success">‚úÖ Demande envoy√©e ! Patrick vous recontacte sous 24h.</div>
<div id="errorMsg" class="message error">‚ùå Erreur technique. Contactez Patrick: 06.82.05.28.24</div>
</form>
</div>
</div>

<div class="footer">
<h3>üìû Contact Patrick Almeida</h3>
<div class="contact-grid">
<div class="contact-item">
<div class="contact-icon">üì±</div>
<div class="contact-title">T√©l√©phone</div>
<div class="contact-value"><a href="tel:0682052824">06.82.05.28.24</a></div>
</div>
<div class="contact-item">
<div class="contact-icon">‚úâÔ∏è</div>
<div class="contact-title">Email</div>
<div class="contact-value"><a href="mailto:palmeida@efficity.com">palmeida@efficity.com</a></div>
</div>
<div class="contact-item">
<div class="contact-icon">üìç</div>
<div class="contact-title">Adresse</div>
<div class="contact-value">6 place des Tapis<br>69004 Lyon</div>
</div>
</div>
<p style="margin-top:20px;opacity:0.8;">¬© 2025 Efficiency Lyon - Patrick Almeida | Expert Immobilier Certifi√©</p>
</div>
</div>

<script>
document.getElementById('estimationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    var submitBtn = document.getElementById('submitBtn');
    var loadingMsg = document.getElementById('loadingMsg');
    var successMsg = document.getElementById('successMsg');
    var errorMsg = document.getElementById('errorMsg');
    
    // Reset messages
    loadingMsg.style.display = 'none';
    successMsg.style.display = 'none';
    errorMsg.style.display = 'none';
    
    // D√©sactiver bouton et afficher loading
    submitBtn.disabled = true;
    submitBtn.innerHTML = '‚è≥ Envoi en cours...';
    loadingMsg.style.display = 'block';
    
    // R√©cup√©rer les donn√©es du formulaire
    var formData = new FormData(this);
    var data = {
        prenom: formData.get('firstName'),
        nom: formData.get('lastName'),
        email: formData.get('email'),
        telephone: formData.get('phone'),
        adresse: formData.get('address'),
        type_bien: formData.get('propertyType'),
        surface: formData.get('surface'),
        urgence_estimation: formData.get('projetDelai'),
        commentaires: formData.get('message')
    };
    
    console.log('üì§ Envoi vers CRM Efficity Patrick:', data);
    
    // ENVOI VERS CRM EINSTEIN DASHBOARD
    fetch('https://einstein-dashboard.preview.emergentagent.com/api/estimation/submit-prospect-email', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(function(response) {
        if (!response.ok) {
            throw new Error('Erreur r√©seau: ' + response.status);
        }
        return response.json();
    })
    .then(function(result) {
        loadingMsg.style.display = 'none';
        
        console.log('üì• R√©ponse CRM Efficity:', result);
        
        if (result.success) {
            // SUCC√àS
            successMsg.style.display = 'block';
            
            // Reset formulaire
            document.getElementById('estimationForm').reset();
            
            // Scroll vers message
            successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            console.log('‚úÖ Lead Efficity cr√©√© - ID:', result.lead_id);
            console.log('üß† Patrick IA Score:', result.patrick_ai_score || 'En cours');
            console.log('üìß Email automation activ√©');
            console.log('üîî Notification Patrick envoy√©e');
            
        } else {
            // Erreur du serveur
            throw new Error(result.message || 'Erreur serveur inconnue');
        }
    })
    .catch(function(error) {
        loadingMsg.style.display = 'none';
        errorMsg.style.display = 'block';
        
        console.error('‚ùå Erreur envoi CRM:', error);
        
        // Message d'erreur avec contact direct
        errorMsg.innerHTML = '‚ùå <strong>Erreur technique</strong><br>Contactez Patrick directement: <a href="tel:0682052824" style="color:#721c24;font-weight:bold;">06.82.05.28.24</a> | <a href="mailto:palmeida@efficity.com" style="color:#721c24;font-weight:bold;">palmeida@efficity.com</a>';
        
        // Scroll vers erreur
        errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
    })
    .finally(function() {
        // Restaurer le bouton dans tous les cas
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'üè† Demander mon estimation gratuite';
        loadingMsg.style.display = 'none';
    });
});

// Validation temps r√©el
var requiredFields = document.querySelectorAll('input[required], select[required]');
for (var i = 0; i < requiredFields.length; i++) {
    requiredFields[i].addEventListener('input', function() {
        if (this.value.trim()) {
            this.style.borderColor = '#1DB584';
            this.style.backgroundColor = 'white';
        } else {
            this.style.borderColor = '#ddd';
            this.style.backgroundColor = '#f8f9fa';
        }
    });
    
    requiredFields[i].addEventListener('blur', function() {
        if (!this.value.trim()) {
            this.style.borderColor = '#dc3545';
            this.style.backgroundColor = '#fff5f5';
        }
    });
}

console.log('‚úÖ Interface Patrick Almeida Efficity initialis√©e');
console.log('üîó CRM Einstein Dashboard connect√©');
console.log('üìß Email automation Gmail Marketing activ√©');
console.log('üéØ Pr√™t pour publicit√©s Facebook');
</script>
</body>
</html>