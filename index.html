"<!DOCTYPE html>
<html lang=\"fr\">
<head>
    <meta charset=\"UTF-8\">
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">
    <title>Estimation Immobilière Gratuite Lyon | Patrick Almeida - Efficity</title>
    <meta name=\"description\" content=\"Estimation gratuite de votre bien immobilier à Lyon par Patrick Almeida, expert certifié Efficity. Analyse précise, visite sous 48h, vente optimisée.\">
    
    <!-- Fonts Google -->
    <link href=\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">
    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css\" rel=\"stylesheet\">
    
    <style>
        :root {
            --efficity-green: #1DB584;
            --efficity-dark-green: #16A075;
            --efficity-light-green: #E8F8F5;
            --efficity-blue: #2E86C1;
            --efficity-dark: #1A202C;
            --efficity-gray: #4A5568;
            --efficity-light-gray: #F7FAFC;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.2);
            --border-radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--efficity-dark);
            background: var(--efficity-light-gray);
        }

        /* Header Efficity Professionnel */
        .header {
            background: linear-gradient(135deg, var(--efficity-green) 0%, var(--efficity-dark-green) 100%);
            padding: 0;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><defs><pattern id=\"grid\" width=\"10\" height=\"10\" patternUnits=\"userSpaceOnUse\"><path d=\"M 10 0 L 0 0 0 10\" fill=\"none\" stroke=\"rgba(255,255,255,0.1)\" stroke-width=\"0.5\"/></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23grid)\"/></svg>');
            opacity: 0.3;
        }

        .navbar {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            position: relative;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .efficity-logo {
            display: flex;
            align-items: center;
            font-size: 28px;
            font-weight: 800;
            color: var(--efficity-green);
            text-decoration: none;
        }

        .efficity-logo i {
            margin-right: 10px;
            font-size: 32px;
        }

        .nav-contact {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-phone {
            color: var(--efficity-green);
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-phone:hover {
            color: var(--efficity-dark-green);
        }

        /* Hero Section */
        .hero-section {
            padding: 60px 20px 80px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .hero-container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Photo Patrick Professionnelle */
        .patrick-profile {
            position: relative;
            width: 160px;
            height: 160px;
            margin: 0 auto 30px;
        }

        .patrick-photo {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: 6px solid white;
            box-shadow: var(--shadow-lg);
            object-fit: cover;
            object-position: center;
            transition: var(--transition);
        }

        .patrick-photo:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .patrick-badge {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: white;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: var(--shadow-md);
            border: 3px solid white;
        }

        .hero-title {
            color: white;
            font-size: 3.2rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            color: rgba(255,255,255,0.95);
            font-size: 1.4rem;
            font-weight: 400;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .patrick-credentials {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            padding: 30px;
            margin: 40px auto 0;
            max-width: 600px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .patrick-name {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .patrick-title {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .patrick-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            text-align: center;
        }

        .stat-item {
            color: white;
        }

        .stat-number {
            display: block;
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* Container Principal */
        .main-container {
            max-width: 1200px;
            margin: -40px auto 0;
            position: relative;
            z-index: 20;
            padding: 0 20px;
        }

        /* Benefits Cards */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .benefit-card {
            background: white;
            padding: 40px 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            text-align: center;
            transition: var(--transition);
            border-top: 4px solid var(--efficity-green);
            position: relative;
            overflow: hidden;
        }

        .benefit-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--efficity-light-green) 0%, transparent 50%);
            opacity: 0;
            transition: var(--transition);
        }

        .benefit-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .benefit-card:hover::before {
            opacity: 1;
        }

        .benefit-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--efficity-green), var(--efficity-dark-green));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: white;
            font-size: 32px;
            position: relative;
            z-index: 2;
        }

        .benefit-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--efficity-dark);
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .benefit-description {
            color: var(--efficity-gray);
            font-size: 1rem;
            line-height: 1.6;
            position: relative;
            z-index: 2;
        }

        /* Formulaire Professionnel */
        .form-section {
            background: white;
            padding: 60px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            margin-bottom: 60px;
            position: relative;
            overflow: hidden;
        }

        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--efficity-green), var(--efficity-blue), var(--efficity-dark-green));
        }

        .form-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .form-title {
            font-size: 2.6rem;
            font-weight: 800;
            color: var(--efficity-dark);
            margin-bottom: 15px;
        }

        .form-subtitle {
            color: var(--efficity-gray);
            font-size: 1.2rem;
            font-weight: 400;
        }

        /* Tabs Navigation */
        .form-tabs {
            display: flex;
            background: var(--efficity-light-gray);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 40px;
        }

        .tab-button {
            flex: 1;
            background: none;
            border: none;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--efficity-gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .tab-button.active {
            background: var(--efficity-green);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            display: block;
            color: var(--efficity-dark);
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .required {
            color: #E53E3E;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition);
            background: #F8FAFC;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--efficity-green);
            background: white;
            box-shadow: 0 0 0 3px rgba(29, 181, 132, 0.1);
        }

        .form-input:valid:not(:placeholder-shown) {
            border-color: var(--efficity-green);
            background: white;
        }

        /* Auto-complétion adresse */
        .address-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--efficity-green);
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .address-suggestion {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: var(--transition);
        }

        .address-suggestion:hover {
            background: var(--efficity-light-green);
        }

        .address-suggestion:last-child {
            border-bottom: none;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--efficity-green), var(--efficity-dark-green));
            color: white;
            border: none;
            padding: 22px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            margin-top: 30px;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            transition: all 0.6s;
            transform: translate(-50%, -50%);
        }

        .submit-btn:hover::before {
            width: 400px;
            height: 400px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Messages */
        .message {
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .loading-message {
            background: #EBF8FF;
            border: 2px solid #90CDF4;
            color: #2B6CB0;
        }

        .success-message {
            background: #F0FFF4;
            border: 2px solid #9AE6B4;
            color: #2F855A;
        }

        .error-message {
            background: #FED7D7;
            border: 2px solid #FC8181;
            color: #C53030;
        }

        /* Footer Professionnel */
        .footer {
            background: linear-gradient(135deg, var(--efficity-dark) 0%, #2D3748 100%);
            color: white;
            padding: 80px 20px 40px;
            margin-top: 80px;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 50px;
            margin-bottom: 40px;
        }

        .footer-section h3 {
            color: var(--efficity-green);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            transition: var(--transition);
        }

        .contact-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .contact-icon {
            width: 45px;
            height: 45px;
            background: var(--efficity-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .contact-details h4 {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .contact-details p {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        .contact-details a {
            color: inherit;
            text-decoration: none;
            transition: var(--transition);
        }

        .contact-details a:hover {
            color: var(--efficity-green);
        }

        /* Mentions Légales */
        .legal-links {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .legal-links a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            margin: 0 15px;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .legal-links a:hover {
            color: var(--efficity-green);
        }

        .copyright {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Spinner */
        .spinner {
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.4rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }

            .patrick-profile {
                width: 140px;
                height: 140px;
            }

            .patrick-photo {
                width: 140px;
                height: 140px;
            }

            .form-section {
                padding: 40px 25px;
                margin: 0 10px 40px;
            }

            .form-title {
                font-size: 2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .benefits-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .nav-container {
                flex-direction: column;
                gap: 15px;
            }

            .form-tabs {
                flex-direction: column;
                gap: 5px;
            }

            .patrick-stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: fadeInUp 0.6s ease-out forwards;
        }
    </style>
</head>

<body>
    <!-- Header avec Navigation Efficity -->
    <header class=\"header\">
        <nav class=\"navbar\">
            <div class=\"nav-container\">
                <a href=\"#\" class=\"efficity-logo\">
                    <i class=\"fas fa-home\"></i>
                    EFFICITY
                </a>
                <div class=\"nav-contact\">
                    <a href=\"tel:0682052824\" class=\"nav-phone\">
                        <i class=\"fas fa-phone\"></i>
                        06.82.05.28.24
                    </a>
                </div>
            </div>
        </nav>

        <section class=\"hero-section\">
            <div class=\"hero-container\">
                <!-- Photo Patrick Centrée -->
                <div class=\"patrick-profile\">
                    <img src=\"https://raw.githubusercontent.com/palmeida-coder/patrick-estimation/main/patrick-visage-pour-site-estimation.jpg\"
                         alt=\"Patrick Almeida - Expert Immobilier Efficity Lyon\"
                         class=\"patrick-photo\"
                         onerror=\"this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI4MCIgY3k9IjgwIiByPSI4MCIgZmlsbD0iIzFEQjU4NCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iNDgiIGZvbnQtZmFtaWx5PSJQb3BwaW5zIiBmb250LXdlaWdodD0iYm9sZCI+UEE8L3RleHQ+PC9zdmc+'\">
                    <div class=\"patrick-badge\">
                        <i class=\"fas fa-star\"></i>
                    </div>
                </div>

                <h1 class=\"hero-title\">🏠 Estimation Gratuite Lyon</h1>
                <p class=\"hero-subtitle\">Obtenez une estimation précise et gratuite de votre propriété par un expert certifié du marché lyonnais</p>

                <div class=\"patrick-credentials\">
                    <div class=\"patrick-name\">Patrick Almeida</div>
                    <div class=\"patrick-title\">Expert Immobilier Certifié • Efficity Lyon</div>
                    <div class=\"patrick-stats\">
                        <div class=\"stat-item\">
                            <span class=\"stat-number\">500+</span>
                            <span class=\"stat-label\">Ventes Réalisées</span>
                        </div>
                        <div class=\"stat-item\">
                            <span class=\"stat-number\">47j</span>
                            <span class=\"stat-label\">Délai Moyen</span>
                        </div>
                        <div class=\"stat-item\">
                            <span class=\"stat-number\">+12%</span>
                            <span class=\"stat-label\">Prix Optimisé</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </header>

    <div class=\"main-container\">
        <!-- Bénéfices Efficity -->
        <section class=\"benefits-grid animate-in\">
            <div class=\"benefit-card\">
                <div class=\"benefit-icon\">
                    <i class=\"fas fa-brain\"></i>
                </div>
                <h3 class=\"benefit-title\">Analyse IA Avancée</h3>
                <p class=\"benefit-description\">Estimation précise basée sur l'intelligence artificielle Patrick IA 4.0 et l'analyse des données du marché lyonnais en temps réel</p>
            </div>

            <div class=\"benefit-card\">
                <div class=\"benefit-icon\">
                    <i class=\"fas fa-clock\"></i>
                </div>
                <h3 class=\"benefit-title\">Visite Express 48H</h3>
                <p class=\"benefit-description\">Rendez-vous garanti sous 48 heures pour une évaluation personnalisée et une stratégie de vente adaptée à votre bien</p>
            </div>

            <div class=\"benefit-card\">
                <div class=\"benefit-icon\">
                    <i class=\"fas fa-trophy\"></i>
                </div>
                <h3 class=\"benefit-title\">Vente Optimisée</h3>
                <p class=\"benefit-description\">Accompagnement 360° de l'estimation à la signature avec un réseau qualifié d'acquéreurs et une stratégie marketing premium</p>
            </div>
        </section>

        <!-- Formulaire Professionnel avec Onglets -->
        <section class=\"form-section animate-in\">
            <div class=\"form-header\">
                <h2 class=\"form-title\">📋 Demande d'Estimation Professionnelle</h2>
                <p class=\"form-subtitle\">Formulaire sécurisé pour recevoir votre estimation personnalisée sous 24h</p>
            </div>

            <!-- Navigation Onglets -->
            <div class=\"form-tabs\">
                <button class=\"tab-button active\" onclick=\"switchTab(event, 'personal-tab')\">
                    <i class=\"fas fa-user\"></i> Vos Informations
                </button>
                <button class=\"tab-button\" onclick=\"switchTab(event, 'property-tab')\">
                    <i class=\"fas fa-home\"></i> Votre Bien
                </button>
                <button class=\"tab-button\" onclick=\"switchTab(event, 'details-tab')\">
                    <i class=\"fas fa-cog\"></i> Détails & Préférences
                </button>
            </div>

            <form id=\"estimationForm\">
                <!-- Onglet 1: Informations Personnelles -->
                <div id=\"personal-tab\" class=\"tab-content active\">
                    <div class=\"form-grid\">
                        <div class=\"form-group\">
                            <label for=\"firstName\" class=\"form-label\">Prénom <span class=\"required\">*</span></label>
                            <input type=\"text\" id=\"firstName\" name=\"firstName\" class=\"form-input\" required 
                                   placeholder=\"Votre prénom\">
                        </div>

                        <div class=\"form-group\">
                            <label for=\"lastName\" class=\"form-label\">Nom <span class=\"required\">*</span></label>
                            <input type=\"text\" id=\"lastName\" name=\"lastName\" class=\"form-input\" required 
                                   placeholder=\"Votre nom de famille\">
                        </div>

                        <div class=\"form-group\">
                            <label for=\"phone\" class=\"form-label\">Téléphone <span class=\"required\">*</span></label>
                            <input type=\"tel\" id=\"phone\" name=\"phone\" class=\"form-input\" required 
                                   placeholder=\"06 12 34 56 78\">
                        </div>

                        <div class=\"form-group\">
                            <label for=\"email\" class=\"form-label\">Email <span class=\"required\">*</span></label>
                            <input type=\"email\" id=\"email\" name=\"email\" class=\"form-input\" required 
                                   placeholder=\"votre.email@exemple.com\">
                        </div>
                    </div>
                    
                    <button type=\"button\" class=\"submit-btn\" onclick=\"nextTab('property-tab')\">
                        Suivant : Informations du bien <i class=\"fas fa-arrow-right\"></i>
                    </button>
                </div>

                <!-- Onglet 2: Informations du Bien -->
                <div id=\"property-tab\" class=\"tab-content\">
                    <div class=\"form-grid\">
                        <div class=\"form-group full-width\">
                            <label for=\"address\" class=\"form-label\">Adresse complète du bien <span class=\"required\">*</span></label>
                            <input type=\"text\" id=\"address\" name=\"address\" class=\"form-input\" required 
                                   placeholder=\"Commencez à taper l'adresse...\"
                                   oninput=\"searchAddresses(this.value)\">
                            <div id=\"addressSuggestions\" class=\"address-suggestions\"></div>
                        </div>

                        <div class=\"form-group\">
                            <label for=\"propertyType\" class=\"form-label\">Type de bien <span class=\"required\">*</span></label>
                            <select id=\"propertyType\" name=\"propertyType\" class=\"form-select\" required>
                                <option value=\"\">Sélectionnez le type de bien</option>
                                <option value=\"Appartement\">Appartement</option>
                                <option value=\"Maison\">Maison</option>
                                <option value=\"Studio\">Studio</option>
                                <option value=\"Loft\">Loft</option>
                                <option value=\"Duplex\">Duplex</option>
                                <option value=\"Villa\">Villa</option>
                                <option value=\"Penthouse\">Penthouse</option>
                            </select>
                        </div>

                        <div class=\"form-group\">
                            <label for=\"surface\" class=\"form-label\">Surface habitable (m²) <span class=\"required\">*</span></label>
                            <input type=\"number\" id=\"surface\" name=\"surface\" class=\"form-input\" required min=\"1\" 
                                   placeholder=\"Ex: 85\">
                        </div>

                        <div class=\"form-group\">
                            <label for=\"rooms\" class=\"form-label\">Nombre de pièces</label>
                            <select id=\"rooms\" name=\"rooms\" class=\"form-select\">
                                <option value=\"\">Sélectionnez</option>
                                <option value=\"1\">1 pièce (Studio)</option>
                                <option value=\"2\">2 pièces</option>
                                <option value=\"3\">3 pièces</option>
                                <option value=\"4\">4 pièces</option>
                                <option value=\"5\">5 pièces</option>
                                <option value=\"6\">6 pièces</option>
                                <option value=\"7+\">7 pièces et plus</option>
                            </select>
                        </div>

                        <div class=\"form-group\">
                            <label for=\"floor\" class=\"form-label\">Étage / Niveau</label>
                            <input type=\"text\" id=\"floor\" name=\"floor\" class=\"form-input\" 
                                   placeholder=\"Ex: 3ème étage, RDC, Maison\">
                        </div>

                        <div class=\"form-group\">
                            <label for=\"condition\" class=\"form-label\">État du bien</label>
                            <select id=\"condition\" name=\"condition\" class=\"form-select\">
                                <option value=\"\">Sélectionnez l'état</option>
                                <option value=\"Neuf\">Neuf</option>
                                <option value=\"Excellent\">Excellent état</option>
                                <option value=\"Bon\">Bon état</option>
                                <option value=\"À rafraîchir\">À rafraîchir</option>
                                <option value=\"Travaux importants\">Gros travaux nécessaires</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style=\"display: flex; gap: 15px;\">
                        <button type=\"button\" class=\"submit-btn\" onclick=\"prevTab('personal-tab')\" style=\"background: #6c757d;\">
                            <i class=\"fas fa-arrow-left\"></i> Retour
                        </button>
                        <button type=\"button\" class=\"submit-btn\" onclick=\"nextTab('details-tab')\">
                            Suivant : Finaliser <i class=\"fas fa-arrow-right\"></i>
                        </button>
                    </div>
                </div>

                <!-- Onglet 3: Détails et Préférences -->
                <div id=\"details-tab\" class=\"tab-content\">
                    <div class=\"form-grid\">
                        <div class=\"form-group\">
                            <label for=\"priceWished\" class=\"form-label\">Prix de vente espéré (optionnel)</label>
                            <input type=\"number\" id=\"priceWished\" name=\"priceWished\" class=\"form-input\" 
                                   placeholder=\"Ex: 450000\">
                        </div>

                        <div class=\"form-group\">
                            <label for=\"timeline\" class=\"form-label\">Délai de vente souhaité</label>
                            <select id=\"timeline\" name=\"timeline\" class=\"form-select\">
                                <option value=\"\">Sélectionnez le délai</option>
                                <option value=\"Urgent (cette semaine)\">Urgent (cette semaine)</option>
                                <option value=\"Rapidement (ce mois)\">Rapidement (ce mois)</option>
                                <option value=\"1-3 mois\">1 à 3 mois</option>
                                <option value=\"3-6 mois\">3 à 6 mois</option>
                                <option value=\"6+ mois\">Plus de 6 mois</option>
                                <option value=\"Pas pressé\">Pas pressé</option>
                            </select>
                        </div>

                        <div class=\"form-group full-width\">
                            <label for=\"message\" class=\"form-label\">Informations complémentaires</label>
                            <textarea id=\"message\" name=\"message\" class=\"form-textarea\" rows=\"5\" 
                                    placeholder=\"Décrivez votre bien (balcon, parking, cave, ascenseur, exposition...), vos attentes, contraintes particulières, travaux récents...\"></textarea>
                        </div>
                    </div>
                    
                    <div style=\"display: flex; gap: 15px;\">
                        <button type=\"button\" class=\"submit-btn\" onclick=\"prevTab('property-tab')\" style=\"background: #6c757d;\">
                            <i class=\"fas fa-arrow-left\"></i> Retour
                        </button>
                        <button type=\"submit\" class=\"submit-btn\" id=\"submitBtn\">
                            <i class=\"fas fa-paper-plane\"></i> Envoyer ma demande d'estimation
                        </button>
                    </div>
                </div>

                <!-- Messages d'état -->
                <div class=\"message loading-message\" id=\"loadingMessage\">
                    <div class=\"spinner\"></div>
                    Envoi de votre demande en cours...
                </div>

                <div class=\"message success-message\" id=\"successMessage\">
                    <i class=\"fas fa-check-circle\"></i>
                    <strong>Demande envoyée avec succès !</strong><br>
                    Patrick vous recontactera dans les 24h pour planifier votre visite gratuite.
                </div>

                <div class=\"message error-message\" id=\"errorMessage\">
                    <i class=\"fas fa-exclamation-triangle\"></i>
                    <strong>Erreur lors de l'envoi</strong><br>
                    Veuillez réessayer ou contacter Patrick directement.
                </div>
            </form>

            <div style=\"text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0; font-size: 0.9rem; color: #718096;\">
                <i class=\"fas fa-shield-alt\"></i> Données sécurisées et confidentielles • 
                <i class=\"fas fa-clock\"></i> Réponse garantie sous 24h • 
                <i class=\"fas fa-gift\"></i> Service 100% gratuit sans engagement
            </div>
        </section>
    </div>

    <!-- Footer Professionnel -->
    <footer class=\"footer\">
        <div class=\"footer-container\">
            <div class=\"footer-content\">
                <div class=\"footer-section\">
                    <h3><i class=\"fas fa-user-tie\"></i> Patrick Almeida</h3>
                    <p style=\"margin-bottom: 20px; line-height: 1.6;\">Expert immobilier certifié Efficity, spécialisé dans l'estimation et la vente de biens immobiliers sur Lyon et sa métropole. Plus de 500 transactions réussies.</p>
                    <div style=\"display: flex; gap: 15px;\">
                        <div style=\"width: 50px; height: 50px; background: var(--efficity-green); border-radius: 50%; display: flex; align-items: center; justify-content: center;\">
                            <i class=\"fas fa-certificate\" style=\"color: white; font-size: 20px;\"></i>
                        </div>
                        <div>
                            <h4>Certification Professionnelle</h4>
                            <p>Agent immobilier certifié • Carte professionnelle T</p>
                        </div>
                    </div>
                </div>

                <div class=\"footer-section\">
                    <h3><i class=\"fas fa-phone-alt\"></i> Contact Direct</h3>
                    <div class=\"contact-info\">
                        <div class=\"contact-item\">
                            <div class=\"contact-icon\">
                                <i class=\"fas fa-mobile-alt\"></i>
                            </div>
                            <div class=\"contact-details\">
                                <h4>Téléphone Direct</h4>
                                <p><a href=\"tel:0682052824\">06.82.05.28.24</a></p>
                                <p>Disponible 7j/7 de 8h à 20h</p>
                            </div>
                        </div>

                        <div class=\"contact-item\">
                            <div class=\"contact-icon\">
                                <i class=\"fas fa-envelope\"></i>
                            </div>
                            <div class=\"contact-details\">
                                <h4>Email Professionnel</h4>
                                <p><a href=\"mailto:palmeida@efficity.com\">palmeida@efficity.com</a></p>
                                <p>Réponse rapide garantie</p>
                            </div>
                        </div>

                        <div class=\"contact-item\">
                            <div class=\"contact-icon\">
                                <i class=\"fas fa-map-marker-alt\"></i>
                            </div>
                            <div class=\"contact-details\">
                                <h4>Agence Lyon Centre</h4>
                                <p>6 place des Tapis<br>69004 Lyon</p>
                                <p>Métro : Hôtel de Ville</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class=\"legal-links\">
                <a href=\"#mentions-legales\">Mentions légales</a>
                <a href=\"#politique-confidentialite\">Politique de confidentialité</a>
                <a href=\"#cgv\">Conditions générales</a>
                <a href=\"#rgpd\">Protection des données (RGPD)</a>
            </div>

            <div class=\"copyright\">
                © 2025 Efficity Lyon - Patrick Almeida | Expert Immobilier Certifié | Siret: XXX XXX XXX 00012 | 
                Carte professionnelle T n° XXX-XXXX-XXXX-XX-XX-XXXX délivrée par la CCI de Lyon
            </div>
        </div>
    </footer>

    <script>
        // Gestion des onglets
        function switchTab(event, tabId) {
            // Masquer tous les onglets
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Désactiver tous les boutons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Activer l'onglet sélectionné
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        function nextTab(tabId) {
            // Validation de l'onglet actuel avant de passer au suivant
            const currentTab = document.querySelector('.tab-content.active');
            const requiredFields = currentTab.querySelectorAll('input[required], select[required]');
            let valid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#E53E3E';
                    field.style.boxShadow = '0 0 0 3px rgba(229, 62, 62, 0.1)';
                    valid = false;
                } else {
                    field.style.borderColor = '#1DB584';
                    field.style.boxShadow = '0 0 0 3px rgba(29, 181, 132, 0.1)';
                }
            });

            if (valid) {
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                
                document.getElementById(tabId).classList.add('active');
                document.querySelector(`[onclick*=\"${tabId}\"]`).classList.add('active');
            } else {
                alert('Veuillez remplir tous les champs obligatoires avant de continuer.');
            }
        }

        function prevTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`[onclick*=\"${tabId}\"]`).classList.add('active');
        }

        // Auto-complétion d'adresses (simulation)
        function searchAddresses(query) {
            const suggestionsContainer = document.getElementById('addressSuggestions');
            
            if (query.length < 3) {
                suggestionsContainer.style.display = 'none';
                return;
            }

            // Simulation d'adresses Lyon
            const lyonAddresses = [
                '15 Place Bellecour, 69002 Lyon',
                '25 Rue de la République, 69002 Lyon',
                '10 Place des Terreaux, 69001 Lyon',
                '5 Rue Victor Hugo, 69002 Lyon',
                '30 Cours Lafayette, 69003 Lyon',
                '12 Rue Mercière, 69002 Lyon',
                '8 Place des Jacobins, 69002 Lyon',
                '20 Rue Édouard Herriot, 69002 Lyon',
                '45 Cours Gambetta, 69007 Lyon',
                '18 Avenue Jean Jaurès, 69007 Lyon'
            ];

            const filteredAddresses = lyonAddresses.filter(addr => 
                addr.toLowerCase().includes(query.toLowerCase())
            );

            if (filteredAddresses.length > 0) {
                suggestionsContainer.innerHTML = filteredAddresses
                    .slice(0, 5)
                    .map(addr => `<div class=\"address-suggestion\" onclick=\"selectAddress('${addr}')\">${addr}</div>`)
                    .join('');
                suggestionsContainer.style.display = 'block';
            } else {
                suggestionsContainer.style.display = 'none';
            }
        }

        function selectAddress(address) {
            document.getElementById('address').value = address;
            document.getElementById('addressSuggestions').style.display = 'none';
        }

        // Masquer les suggestions si clic en dehors
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#address') && !e.target.closest('#addressSuggestions')) {
                document.getElementById('addressSuggestions').style.display = 'none';
            }
        });

        // Gestion du formulaire
        document.getElementById('estimationForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            const loadingMessage = document.getElementById('loadingMessage');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');

            // Reset messages
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';

            // Afficher loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<div class=\"spinner\"></div> Envoi en cours...';
            loadingMessage.style.display = 'block';

            try {
                const formData = new FormData(this);
                const data = {
                    prenom: formData.get('firstName'),
                    nom: formData.get('lastName'),
                    email: formData.get('email'),
                    téléphone: formData.get('phone'),
                    adresse: formData.get('address'),
                    type_bien: formData.get('propertyType'),
                    surface: formData.get('surface'),
                    pieces: formData.get('rooms'),
                    etage: formData.get('floor'),
                    etat_bien: formData.get('condition'),
                    prix_souhaité: formData.get('priceWished'),
                    urgence_estimation: formData.get('timeline'),
                    commentaires: formData.get('message')
                };

                console.log('🎯 Envoi vers CRM Efficity Patrick Almeida:', data);

                // URL CRM Efficity corrigée
                const response = await fetch('https://einstein-dashboard.preview.emergentagent.com/api/estimation/submit-prospect-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                console.log('✅ Réponse CRM Efficity:', result);

                if (result.success) {
                    loadingMessage.style.display = 'none';
                    successMessage.style.display = 'block';
                    
                    // Reset formulaire et retour au premier onglet
                    this.reset();
                    switchTab({target: document.querySelector('.tab-button')}, 'personal-tab');
                    
                    // Scroll vers succès
                    successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    console.log('🎉 Lead Efficity créé - ID:', result.lead_id);
                    console.log('🧠 Patrick IA Score:', result.patrick_ai_score);
                    console.log('📧 Email automation:', result.email_sent ? 'Activé' : 'Simulé');

                } else {
                    throw new Error(result.message || 'Erreur lors de l'envoi');
                }

            } catch (error) {
                console.error('❌ Erreur Efficity:', error);
                
                loadingMessage.style.display = 'none';
                errorMessage.style.display = 'block';
                errorMessage.innerHTML = `
                    <i class=\"fas fa-exclamation-triangle\"></i>
                    <strong>Erreur technique temporaire</strong><br>
                    ${error.message}<br><br>
                    <strong>🎯 Contact Direct Patrick Almeida :</strong><br>
                    <a href=\"tel:0682052824\" style=\"color: #C53030; font-weight: bold;\">📞 06.82.05.28.24</a> • 
                    <a href=\"mailto:palmeida@efficity.com\" style=\"color: #C53030; font-weight: bold;\">📧 palmeida@efficity.com</a>
                `;
                
                errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });

            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class=\"fas fa-paper-plane\"></i> Envoyer ma demande d'estimation';
                loadingMessage.style.display = 'none';
            }
        });

        // Validation temps réel
        document.querySelectorAll('input[required], select[required]').forEach(input => {
            input.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    this.style.borderColor = '#E53E3E';
                    this.style.boxShadow = '0 0 0 3px rgba(229, 62, 62, 0.1)';
                } else {
                    this.style.borderColor = '#1DB584';
                    this.style.boxShadow = '0 0 0 3px rgba(29, 181, 132, 0.1)';
                }
            });

            input.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.style.borderColor = '#1DB584';
                    this.style.boxShadow = '0 0 0 3px rgba(29, 181, 132, 0.1)';
                }
            });
        });

        // Animation d'entrée
        document.addEventListener('DOMContentLoaded', function() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInUp 0.6s ease-out forwards';
                    }
                });
            });

            document.querySelectorAll('.animate-in').forEach(el => observer.observe(el));
        });

        console.log('🏢 Interface Efficity Patrick Almeida Professional initialisée');
        console.log('✅ Design responsive PC/Mobile activé');
        console.log('🎯 Charte graphique Efficity appliquée');
        console.log('📱 Auto-complétion adresses Lyon activée');
        console.log('🔒 Mentions légales et RGPD intégrées');
        console.log('📊 Onglets de saisie intelligents actifs');
    </script>
</body>
</html>"
